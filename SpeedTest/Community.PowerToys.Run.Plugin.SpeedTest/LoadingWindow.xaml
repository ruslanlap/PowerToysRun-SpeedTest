<Window
    x:Class="Community.PowerToys.Run.Plugin.SpeedTest.LoadingWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Speed Test in Progress"
    Height="250"
    Width="400"
    ResizeMode="NoResize"
    WindowStartupLocation="CenterScreen"
    Background="#141526"
    Foreground="White"
    FontFamily="Segoe UI">

    <Window.Resources>
        <!-- Анімація обертання -->
        <Storyboard x:Key="SpinnerAnimation">
            <DoubleAnimation 
                Storyboard.TargetName="SpinnerRotation"
                Storyboard.TargetProperty="Angle"
                From="0" To="360" Duration="0:0:1.5"
                RepeatBehavior="Forever" />
        </Storyboard>
    </Window.Resources>

    <Grid Margin="25">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0" 
                   Text="Running Speed Test" 
                   FontSize="20" 
                   FontWeight="SemiBold" 
                   HorizontalAlignment="Center"
                   Margin="0,0,0,20"/>

        <!-- Центральна кнопка "GO" в стилі Speedtest.net -->
        <Grid Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Center">
            <Ellipse Width="120" Height="120" Fill="#222333" />

            <!-- Індикатор прогресу навколо кнопки -->
            <Path x:Name="ProgressRing" Stroke="#0077FF" StrokeThickness="4" Width="120" Height="120">
                <Path.Data>
                    <PathGeometry>
                        <PathGeometry.Figures>
                            <PathFigureCollection>
                                <PathFigure StartPoint="60,10">
                                    <PathFigure.Segments>
                                        <PathSegmentCollection>
                                            <ArcSegment Size="50,50" IsLargeArc="True" 
                                                       SweepDirection="Clockwise" Point="60,110" />
                                        </PathSegmentCollection>
                                    </PathFigure.Segments>
                                </PathFigure>
                            </PathFigureCollection>
                        </PathGeometry.Figures>
                    </PathGeometry>
                </Path.Data>
                <Path.RenderTransform>
                    <RotateTransform x:Name="SpinnerRotation" CenterX="60" CenterY="60" />
                </Path.RenderTransform>
            </Path>

            <!-- Текст "GO" всередині кнопки -->
            <TextBlock Text="GO" 
                       FontSize="24" 
                       FontWeight="SemiBold" 
                       HorizontalAlignment="Center" 
                       VerticalAlignment="Center"/>
        </Grid>

        <!-- Статус тесту -->
        <StackPanel Grid.Row="2" Margin="0,20,0,0">
            <TextBlock x:Name="StatusText"
                       Text="Connecting to server..."
                       HorizontalAlignment="Center"
                       FontSize="14"
                       Opacity="0.9"/>

            <TextBlock x:Name="ServerNameText"
                       Text=""
                       HorizontalAlignment="Center"
                       FontSize="12"
                       Opacity="0.7"
                       Margin="0,8,0,0"/>
        </StackPanel>
    </Grid>
</Window>